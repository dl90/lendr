<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ðŸš€</title>
</head>

<body>
  <ul id="chat"></ul>

  <form>
    <textarea rows="4" cols="30" id="message"></textarea>
    <br />
    <button type="submit">Send</button>
  </form>

  <script>
    const ws = new WebSocket('ws://localhost:8080')

    ws.onopen = () => console.log('connected')
    ws.onclose = () => console.error('disconnected')
    ws.onerror = error => console.error('failed to connect', error)
    ws.onmessage = ({ data }) => {
      const li = document.createElement('li')
      li.innerText = data
      document.querySelector('#chat').append(li)
    }

    document.querySelector('form').addEventListener('submit', event => {
      event.preventDefault()
      ws.send(document.querySelector('#message').value)
      document.querySelector('#message').value = ''
    })
  </script>
</body>

</html>